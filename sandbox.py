#!/usr/bin/python
# -*- coding: utf-8 -*-

from flask import Flask, render_template
from bs4 import BeautifulSoup
import requests
import re

content = \
    '''
    <div id="MainContent_divRegisteredUsers">
                        <h2>Currently Registered </h2>
                        <div style="width:100%;"><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">1. Peter Quinones<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">2. Steven Palm<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">3. Jay Dunn<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">4. Kelly Jepson<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">5. Tony Galindo<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">6. Amanda Besetzny<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">7. Tin Nguyen<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">8. Steve Yanagisawa<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">9. Jason Adams<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">10. Christina Quezada<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">11. paul moore<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">12. Krysten Federspiel<br>Skill: R<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">13. Bo Boatright<br>Skill: BB<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">14. Kayla Curtis<br>Skill: BB<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">15. Buck Oslin<br>Skill: BB<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">16. Mary Kate Puscian<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">17. Rebecca Rawson<br>Skill: R<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">18. David Lesnefsky<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">19. chad erwin<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">20. Melissa Morales<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">21. Stephen Morales<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">22. Shawn Carey<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">23. Luis Medellin<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">24. Laura Wentworth<br>Skill: R<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">25. Angela Gil<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">26. Megan Loftis<br>Skill: R<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">27. Bobby Hominick<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">28. Priscilla Jupe<br>Skill: A<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">29. Robert Lednicky<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">30. Gail Wagner<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">31. Joshua Williamson<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">32. Doug Parker<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">33. Taylor Zarsky<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">34. Kirk Logan<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">35. Stephanie Peden<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">36. Suzanne Lacy<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">37. Jo Wozniak<br>Skill: BB<br>Gender: Female</div></div></div><div class="clearfix"></div>
                        </div>
    '''

"""
FULL PLAYER LIST
<div id="MainContent_divRegisteredUsers">
                    <h2>Currently Registered </h2>
                    <div style="width:100%;"><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">1. Peter Quinones<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">2. Steven Palm<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">3. Jay Dunn<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">4. Kelly Jepson<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">5. Tony Galindo<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">6. Amanda Besetzny<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">7. Tin Nguyen<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">8. Steve Yanagisawa<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">9. Jason Adams<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">10. Christina Quezada<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">11. paul moore<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">12. Krysten Federspiel<br>Skill: R<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">13. Bo Boatright<br>Skill: BB<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">14. Kayla Curtis<br>Skill: BB<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">15. Buck Oslin<br>Skill: BB<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">16. Mary Kate Puscian<br>Skill: R<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">17. Rebecca Rawson<br>Skill: R<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">18. David Lesnefsky<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">19. chad erwin<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">20. Melissa Morales<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">21. Stephen Morales<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">22. Shawn Carey<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">23. Luis Medellin<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">24. Laura Wentworth<br>Skill: R<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">25. Angela Gil<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">26. Megan Loftis<br>Skill: R<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">27. Bobby Hominick<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">28. Priscilla Jupe<br>Skill: A<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">29. Robert Lednicky<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">30. Gail Wagner<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">31. Joshua Williamson<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">32. Doug Parker<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">33. Taylor Zarsky<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">34. Kirk Logan<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">35. Stephanie Peden<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">36. Suzanne Lacy<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">37. Jo Wozniak<br>Skill: BB<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">38. Ben Mochtyak<br>Skill: R<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">39. Aaron Szapa<br>Skill: BB<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">40. Eric Satterness<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">41. Colin Sherrill<br>Skill: B<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">42. Jerel Deacon<br>Skill: BB<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">43. Kara Wallinger<br>Skill: BB<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">44. Kristin Roberts<br>Skill: B<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">45. Alex Genung<br>Skill: BB<br>Gender: Female</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">46. Stephen Whaley<br>Skill: BB<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">47. Brandon Severyn<br>Skill: BB<br>Gender: Male</div></div><div style="float:left; min-width:50%;"><div class="pww-participant" style="background-color:#EFEFEF;">48. Kerry Peden<br>Skill: R<br>Gender: Female</div></div></div><div class="clearfix"></div>
                    </div>

"""

soup = BeautifulSoup(content, 'html.parser')

participants_list = soup.find_all(attrs={'class': 'pww-participant'})

player_list = []
for player in participants_list:
    player_dict = {}
    for content in player.contents:
        name_pattern = re.compile('[0-9]{1,2}. ([\w]+ [\w]+)')
        name = re.match(name_pattern, str(content))
        if name:
            player_dict['name'] = name.groups()[0]
        skill_pattern = re.compile('Skill: ([\w])')
        skill = re.match(skill_pattern, str(content))
        if skill:
            player_dict['skill'] = skill.groups()[0]
        gender_pattern = re.compile('Gender: ([\w]+)')
        gender = re.match(gender_pattern, str(content))
        if gender:
            player_dict['gender'] = gender.groups()[0]
    if len(player_dict) > 0:
        player_list.append(player_dict)

for player in player_list:
    print player
